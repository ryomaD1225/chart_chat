<!DOCTYPE html>
<html>
<head>
    <title>Matrix Code</title>
</head>
<body>
<canvas id="c"></canvas>

<script>
//var を使わずに定義した変数はグローバル変数として査定される。
var c = document.getElementById("c");  
var ctx = c.getContext("2d");

//canvas をフルスクリーンで設定
c.height = window.innerHeight;
c.width = window.innerWidth;

//中国語とロシア語 from unicode charset
var chinese = "ABCDEFGHIGKFKPLFJ@;:>?$#%&g198276453田由甲申甴电甶男甸甹町画甼甽甾甿畀畁и畂畃Ф畄Ш畅畆畇畈畉畊畋界畍畎畏畐畑";

//配列の中身を一つの文字に分割
chinese = chinese.split("");

var font_size = 10;

//フォントサイズ (割) 列 for rain = 変数に叩き込む
var columns = c.width/font_size; 

//drops用の配列 - per column
var drops = [];

//x は x座標 = 横
//1 は y座標 の drop(一番最初のシーンに落ちてくる) = 縦
//x(横配列)が列よりも少ない場合は、xに +1 する
for(var x = 0; x < columns; x++)
	drops[x] = 1; // ← 謎 なぜだ

//関数を作成
function draw()
{
	//Black BG for the canvas
	//translucent BG to show trail
	ctx.fillStyle = "rgba(0, 0, 0, 0.05)"; //図形を塗りつブス色を指定。あくまで指定。
	ctx.fillRect(0, 0, c.width, c.height); //取得したコンテキストで矩形を描画します。
	ctx.fillStyle = "#0F0";                //green textをfill
	ctx.font = font_size + "px arial";     
	//drops をループしまくる
	for(var i = 0; i < drops.length; i++)
	{
        //ランダムに chinese character を print する
        //Math.floorは(Math.random()*chinese.length)の 切り捨てた値を返す。
        var text = chinese[Math.floor(Math.random()*chinese.length)];
        
        //x = i*font_size, y = value of drops[i]*font_size
        //ランダムに生成された変数(text)を輪郭描画する。
		ctx.fillText(text, i*font_size, drops[i]*font_size);
		
		//sending the drop back to the top randomly after it has crossed the screen
		//adding a randomness to the reset to make the drops scattered on the Y axis
		if(drops[i]*font_size > c.height && Math.random() > 0.975)
			drops[i] = 0;
		
		//incrementing Y coordinate
		drops[i]++;
	}
}

setInterval(draw, 43);
</script>
</body>>
